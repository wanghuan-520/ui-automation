    @pytest.mark.P1
    @pytest.mark.validation
    def test_p1_surname_field_validation(self, logged_in_profile_page):
        """
        TC-VALID-SURNAME-001: Surnameå­—æ®µæ ¼å¼ä¸é•¿åº¦éªŒè¯æµ‹è¯•ï¼ˆå®Œæ•´ç‰ˆï¼‰
        
        æµ‹è¯•ç›®æ ‡ï¼šéªŒè¯Surnameå­—æ®µçš„å®Œæ•´éªŒè¯è§„åˆ™ï¼ˆæ ¼å¼+é•¿åº¦+å¿…å¡«/éå¿…å¡«ï¼‰
        æµ‹è¯•åŒºåŸŸï¼šProfile - Personal Settings - Surname Validation
        
        ============================================================================
        åç«¯æ ¡éªŒè§„åˆ™ï¼ˆABP Framework AbpUserConstsï¼‰:
        ============================================================================
        
        ğŸ“‹ å­—æ®µå±æ€§
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  å­—æ®µåï¼šSurnameï¼ˆå§“æ°ï¼‰                                          â”‚
        â”‚  å¿…å¡«çŠ¶æ€ï¼šâŒ éå¿…å¡«ï¼ˆå¯é€‰å­—æ®µï¼‰                                 â”‚
        â”‚  å¯ç¼–è¾‘æ€§ï¼šâœ… å¯ç¼–è¾‘                                             â”‚
        â”‚  é•¿åº¦é™åˆ¶ï¼š0-64å­—ç¬¦                                              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        
        ğŸ”¤ æ ¼å¼è§„åˆ™
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  æ ¼å¼é™åˆ¶ï¼šæ— ä¸¥æ ¼é™åˆ¶ï¼ˆä¸Nameå­—æ®µç›¸åŒï¼‰                          â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  âœ… å…è®¸çš„å­—ç¬¦ï¼š                                                  â”‚
        â”‚     â€¢ å­—æ¯ï¼ˆå¤§å°å†™ï¼‰ï¼ša-z, A-Z                                   â”‚
        â”‚     â€¢ æ•°å­—ï¼š0-9                                                  â”‚
        â”‚     â€¢ ç©ºæ ¼                                                        â”‚
        â”‚     â€¢ ç‰¹æ®Šç¬¦å·ï¼š-.'ç­‰                                            â”‚
        â”‚     â€¢ ä¸­æ–‡å­—ç¬¦                                                    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        
        ğŸ“ æµ‹è¯•åœºæ™¯è¦†ç›–ï¼ˆ12ä¸ªåœºæ™¯ï¼‰
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  1. æ ¼å¼éªŒè¯-æœ‰æ•ˆï¼ˆ5ä¸ªåœºæ™¯ï¼‰                                      â”‚
        â”‚     â€¢ çº¯è‹±æ–‡ï¼šSmith                                               â”‚
        â”‚     â€¢ çº¯ä¸­æ–‡ï¼šæ                                                  â”‚
        â”‚     â€¢ å¸¦è¿å­—ç¬¦ï¼šSmith-Jones                                       â”‚
        â”‚     â€¢ å¸¦æ’‡å·ï¼šO'Brien                                             â”‚
        â”‚     â€¢ å¤æ‚ï¼šVon Neumann                                           â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  2. é•¿åº¦éªŒè¯ï¼ˆ5ä¸ªåœºæ™¯ï¼‰                                           â”‚
        â”‚     â€¢ ç©ºå€¼ï¼šå…è®¸ï¼ˆéå¿…å¡«ï¼‰                                        â”‚
        â”‚     â€¢ æœ€å°é•¿åº¦1å­—ç¬¦ï¼šL                                            â”‚
        â”‚     â€¢ æ­£å¸¸é•¿åº¦ï¼šæ­£å¸¸å§“æ°                                          â”‚
        â”‚     â€¢ æœ€å¤§é•¿åº¦64å­—ç¬¦ï¼šè¾¹ç•Œå€¼                                      â”‚
        â”‚     â€¢ è¶…é•¿65å­—ç¬¦ï¼šåº”è¢«æ‹’ç»                                        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚  3. ç‰¹æ®Šæƒ…å†µï¼ˆ2ä¸ªåœºæ™¯ï¼‰                                           â”‚
        â”‚     â€¢ ä»…ç©ºæ ¼ï¼š"   "ï¼ˆå¯èƒ½è¢«trimï¼‰                                 â”‚
        â”‚     â€¢ çº¯æ•°å­—ï¼š789ï¼ˆéªŒè¯æ˜¯å¦å…è®¸ï¼‰                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        
        é¢„æœŸç»“æœï¼š
        - å‡ ä¹æ‰€æœ‰å­—ç¬¦ç»„åˆéƒ½åº”è¢«æ¥å—
        - ç©ºå€¼åº”è¢«æ¥å—ï¼ˆéå¿…å¡«å­—æ®µï¼‰
        - è¶…è¿‡64å­—ç¬¦åº”è¢«æ‹’ç»æˆ–æˆªæ–­
        """
        logger.info("å¼€å§‹æ‰§è¡ŒTC-VALID-SURNAME-001: Surnameå­—æ®µæ ¼å¼ä¸é•¿åº¦éªŒè¯")
        logger.info("=" * 60)
        logger.info("æ ¡éªŒè§„åˆ™ï¼šMaxSurnameLength=64, éå¿…å¡«, å‡ ä¹æ— æ ¼å¼é™åˆ¶")
        logger.info("=" * 60)
        
        profile_page = logged_in_profile_page
        screenshot_idx = 1
        
        # è·å–åŸå§‹Surnameå’ŒNameï¼ˆç¡®ä¿å…¶ä»–å­—æ®µæœ‰æ•ˆï¼‰
        original_surname = profile_page.get_surname_value()
        original_name = profile_page.get_name_value() or "TestName"
        
        logger.info(f"åŸå§‹Surname: '{original_surname}'")
        logger.info(f"åŸå§‹Name: '{original_name}'")
        
        # æˆªå›¾1ï¼šåˆå§‹çŠ¶æ€
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        screenshot_path = f"surname_validation_init_{timestamp}.png"
        profile_page.take_screenshot(screenshot_path)
        allure.attach.file(
            f"screenshots/{screenshot_path}",
            name=f"{screenshot_idx}-Surnameå­—æ®µåˆå§‹çŠ¶æ€",
            attachment_type=allure.attachment_type.PNG
        )
        screenshot_idx += 1
        
        # å®šä¹‰æµ‹è¯•åœºæ™¯ï¼ˆå®Œæ•´è¦†ç›–12ä¸ªåœºæ™¯ï¼‰
        test_scenarios = [
            # ========== 1. æ ¼å¼éªŒè¯-æœ‰æ•ˆï¼ˆ5ä¸ªåœºæ™¯ï¼‰ ==========
            {
                "type": "format_valid",
                "name": "çº¯è‹±æ–‡",
                "value": "Smith",
                "should_save": True,
                "should_error": False,
                "description": "çº¯è‹±æ–‡å§“æ°ï¼ˆæœ‰æ•ˆï¼‰",
                "expected": "æˆåŠŸä¿å­˜",
            },
            {
                "type": "format_valid",
                "name": "çº¯ä¸­æ–‡",
                "value": "æ",
                "should_save": True,
                "should_error": False,
                "description": "çº¯ä¸­æ–‡å§“æ°ï¼ˆæœ‰æ•ˆï¼‰",
                "expected": "æˆåŠŸä¿å­˜",
            },
            {
                "type": "format_valid",
                "name": "å¸¦è¿å­—ç¬¦",
                "value": "Smith-Jones",
                "should_save": True,
                "should_error": False,
                "description": "å¤åˆå§“æ°å¸¦è¿å­—ç¬¦ï¼ˆæœ‰æ•ˆï¼‰",
                "expected": "æˆåŠŸä¿å­˜",
            },
            {
                "type": "format_valid",
                "name": "å¸¦æ’‡å·",
                "value": "O'Brien",
                "should_save": True,
                "should_error": False,
                "description": "åŒ…å«æ’‡å·çš„å§“æ°ï¼ˆæœ‰æ•ˆï¼‰",
                "expected": "æˆåŠŸä¿å­˜",
            },
            {
                "type": "format_valid",
                "name": "å¸¦ç©ºæ ¼",
                "value": "Von Neumann",
                "should_save": True,
                "should_error": False,
                "description": "åŒ…å«ç©ºæ ¼çš„å¤æ‚å§“æ°ï¼ˆæœ‰æ•ˆï¼‰",
                "expected": "æˆåŠŸä¿å­˜",
            },
            
            # ========== 2. é•¿åº¦éªŒè¯ï¼ˆ5ä¸ªåœºæ™¯ï¼‰ ==========
            {
                "type": "length_empty",
                "name": "ç©ºå€¼å…è®¸",
                "value": "",
                "should_save": True,
                "should_error": False,
                "description": "ç©ºå€¼ï¼ˆéå¿…å¡«ï¼Œå…è®¸ä¸ºç©ºï¼‰",
                "expected": "æˆåŠŸä¿å­˜ï¼ˆç©ºå€¼ï¼‰",
            },
            {
                "type": "length_min",
                "name": "æœ€å°é•¿åº¦1å­—ç¬¦",
                "value": "L",
                "should_save": True,
                "should_error": False,
                "description": "æœ€å°é•¿åº¦ï¼ˆè¾¹ç•Œå€¼ï¼‰",
                "expected": "æˆåŠŸä¿å­˜",
            },
            {
                "type": "length_normal",
                "name": "æ­£å¸¸é•¿åº¦",
                "value": "Johnson",
                "should_save": True,
                "should_error": False,
                "description": "æ­£å¸¸é•¿åº¦å§“æ°",
                "expected": "æˆåŠŸä¿å­˜",
            },
            {
                "type": "length_max",
                "name": "æœ€å¤§é•¿åº¦64å­—ç¬¦",
                "value": "S" * 64,
                "should_save": True,
                "should_error": False,
                "description": "æœ€å¤§å…è®¸é•¿åº¦ï¼ˆè¾¹ç•Œå€¼ï¼‰",
                "expected": "æˆåŠŸä¿å­˜",
            },
            {
                "type": "length_over",
                "name": "è¶…é•¿65å­—ç¬¦",
                "value": "T" * 65,
                "should_save": False,
                "should_error": True,
                "description": "è¶…è¿‡æœ€å¤§é•¿åº¦ï¼ˆè¾¹ç•Œå€¼+1ï¼‰",
                "expected": "è¢«æˆªæ–­æˆ–æ˜¾ç¤ºé”™è¯¯",
            },
            
            # ========== 3. ç‰¹æ®Šæƒ…å†µï¼ˆ2ä¸ªåœºæ™¯ï¼‰ ==========
            {
                "type": "special_spaces",
                "name": "ä»…ç©ºæ ¼",
                "value": "   ",
                "should_save": True,
                "should_error": False,
                "description": "ä»…ç©ºæ ¼ï¼ˆå¯èƒ½è¢«trimï¼‰",
                "expected": "å¯èƒ½ä¿å­˜æˆ–trimä¸ºç©º",
            },
            {
                "type": "special_number",
                "name": "çº¯æ•°å­—",
                "value": "789",
                "should_save": True,
                "should_error": False,
                "description": "çº¯æ•°å­—ï¼ˆéªŒè¯æ˜¯å¦å…è®¸ï¼‰",
                "expected": "æˆåŠŸä¿å­˜ï¼ˆå¦‚æœå…è®¸ï¼‰",
            },
        ]
        
        validation_results = []
        
        # æ‰§è¡Œæµ‹è¯•åœºæ™¯
        for idx, scenario in enumerate(test_scenarios, 1):
            logger.info("")
            logger.info("=" * 70)
            logger.info(f"åœºæ™¯ {idx}/{len(test_scenarios)}: {scenario['name']}")
            logger.info("=" * 70)
            logger.info(f"  è¾“å…¥å€¼: '{scenario['value'][:50]}{'...' if len(scenario['value']) > 50 else ''}'")
            logger.info(f"  é•¿åº¦: {len(scenario['value'])} å­—ç¬¦")
            logger.info(f"  æè¿°: {scenario['description']}")
            logger.info(f"  é¢„æœŸ: {scenario['expected']}")
            
            # åˆ·æ–°é¡µé¢ç¡®ä¿å¹²å‡€çŠ¶æ€
            profile_page.page.reload()
            profile_page.page.wait_for_load_state("domcontentloaded")
            profile_page.page.wait_for_timeout(2000)
            
            # è¾“å…¥æµ‹è¯•å€¼ï¼ˆSurname + ç¡®ä¿Nameæœ‰æ•ˆï¼‰
            profile_page.fill_input(profile_page.NAME_INPUT, original_name)
            profile_page.fill_input(profile_page.SURNAME_INPUT, scenario['value'])
            
            # æˆªå›¾1ï¼šè¾“å…¥å
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            safe_name = scenario['name'].replace(' ', '_').replace('/', '_')
            screenshot_path = f"surname_{safe_name}_input_{timestamp}.png"
            profile_page.take_screenshot(screenshot_path)
            allure.attach.file(
                f"screenshots/{screenshot_path}",
                name=f"{screenshot_idx}-{scenario['name']}_è¾“å…¥å",
                attachment_type=allure.attachment_type.PNG
            )
            screenshot_idx += 1
            
            # ç‚¹å‡»ä¿å­˜
            profile_page.click_element(profile_page.SAVE_BUTTON)
            profile_page.page.wait_for_load_state("networkidle")
            profile_page.page.wait_for_timeout(2000)
            
            # æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯æç¤º
            has_error = False
            error_message = ""
            try:
                validation_info = profile_page.page.evaluate(f"""
                    (() => {{
                        const el = document.querySelector("{profile_page.SURNAME_INPUT}");
                        return {{
                            valid: el ? el.validity.valid : null,
                            message: el ? el.validationMessage : '',
                            tooLong: el ? el.validity.tooLong : null,
                        }};
                    }})()
                """)
                
                if validation_info and not validation_info['valid']:
                    has_error = True
                    error_message = validation_info['message']
                    logger.info(f"  âœ“ æ£€æµ‹åˆ°HTML5éªŒè¯é”™è¯¯: {error_message}")
                
                error_selectors = [".invalid-feedback", ".text-danger", "[role='alert'].text-danger"]
                for selector in error_selectors:
                    if profile_page.is_visible(selector):
                        error_text = profile_page.get_text(selector)
                        if error_text:
                            has_error = True
                            error_message += f" | {error_text}"
                            logger.info(f"  âœ“ æ£€æµ‹åˆ°é¡µé¢é”™è¯¯æç¤º: {error_text}")
            except Exception as e:
                logger.warning(f"  æ£€æŸ¥é”™è¯¯æ—¶å‡ºç°å¼‚å¸¸: {e}")
            
            # æˆªå›¾2ï¼šä¿å­˜å
            timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
            screenshot_path = f"surname_{safe_name}_saved_{timestamp}.png"
            profile_page.take_screenshot(screenshot_path)
            
            expected_str = "æˆåŠŸ" if scenario['should_save'] else "å¤±è´¥"
            actual_str = "æˆåŠŸ" if not has_error else "å¤±è´¥"
            error_expected_str = "æ— é”™è¯¯" if not scenario['should_error'] else "æœ‰é”™è¯¯"
            error_actual_str = "æ— é”™è¯¯" if not has_error else "æœ‰é”™è¯¯"
            
            screenshot_desc = f"{screenshot_idx}-{scenario['name']}_ä¿å­˜åï¼ˆé¢„æœŸ:{expected_str}/{error_expected_str}, å®é™…:{actual_str}/{error_actual_str}ï¼‰"
            
            allure.attach.file(
                f"screenshots/{screenshot_path}",
                name=screenshot_desc,
                attachment_type=allure.attachment_type.PNG
            )
            screenshot_idx += 1
            
            # åˆ·æ–°éªŒè¯
            profile_page.page.reload()
            profile_page.page.wait_for_load_state("domcontentloaded")
            profile_page.page.wait_for_timeout(2000)
            
            # è·å–ä¿å­˜åçš„å€¼
            saved_value = profile_page.get_surname_value()
            
            # åˆ¤æ–­æ˜¯å¦ä¿å­˜æˆåŠŸ
            if scenario['type'] in ['length_empty', 'special_spaces']:
                is_saved = (saved_value == scenario['value']) or (saved_value == '' or saved_value is None)
            else:
                is_saved = saved_value == scenario['value']
            
            save_match = is_saved == scenario['should_save']
            error_match = has_error == scenario['should_error']
            overall_match = save_match and error_match
            
            logger.info(f"")
            logger.info(f"  å®é™…ç»“æœ:")
            logger.info(f"    - ä¿å­˜çŠ¶æ€: {'æˆåŠŸä¿å­˜' if is_saved else 'æœªä¿å­˜/è¢«ä¿®æ”¹'}")
            logger.info(f"    - ä¿å­˜å€¼: '{saved_value[:50] if saved_value else '(ç©º)'}{'...' if saved_value and len(saved_value) > 50 else ''}'")
            logger.info(f"    - é”™è¯¯æç¤º: {'æœ‰' if has_error else 'æ— '} {f'({error_message})' if error_message else ''}")
            logger.info(f"")
            logger.info(f"  ç»“æœåˆ¤æ–­:")
            logger.info(f"    - ä¿å­˜é¢„æœŸ: {scenario['should_save']}ï¼Œå®é™…: {is_saved}ï¼Œ{'âœ…åŒ¹é…' if save_match else 'âŒä¸åŒ¹é…'}")
            logger.info(f"    - é”™è¯¯é¢„æœŸ: {scenario['should_error']}ï¼Œå®é™…: {has_error}ï¼Œ{'âœ…åŒ¹é…' if error_match else 'âŒä¸åŒ¹é…'}")
            logger.info(f"    - ç»¼åˆç»“æœ: {'âœ… é€šè¿‡' if overall_match else 'âŒ å¤±è´¥'}")
            
            if scenario['should_error'] and not has_error:
                logger.error(f"  âš ï¸ å‰ç«¯BUGï¼šæ— æ•ˆè¾“å…¥æœªæ˜¾ç¤ºé”™è¯¯æç¤ºï¼")
            
            validation_results.append({
                "scenario": scenario['name'],
                "type": scenario['type'],
                "input": scenario['value'],
                "input_length": len(scenario['value']),
                "saved": saved_value if saved_value else "(ç©º)",
                "saved_length": len(saved_value) if saved_value else 0,
                "expected_save": scenario['should_save'],
                "actually_saved": is_saved,
                "expected_error": scenario['should_error'],
                "actually_error": has_error,
                "error_message": error_message,
                "match": overall_match
            })
        
        # æ¢å¤åŸå§‹Surname
        logger.info("")
        logger.info("=" * 70)
        logger.info(f"æ¢å¤åŸå§‹Surname: '{original_surname if original_surname else '(ç©º)'}'")
        logger.info("=" * 70)
        profile_page.page.reload()
        profile_page.page.wait_for_load_state("domcontentloaded")
        profile_page.page.wait_for_timeout(2000)
        profile_page.fill_input(profile_page.NAME_INPUT, original_name)
        profile_page.fill_input(profile_page.SURNAME_INPUT, original_surname if original_surname else "")
        profile_page.click_element(profile_page.SAVE_BUTTON)
        profile_page.page.wait_for_load_state("networkidle")
        profile_page.page.wait_for_timeout(2000)
        
        # è¾“å‡ºæµ‹è¯•ç»“æœæ±‡æ€»
        logger.info("")
        logger.info("=" * 80)
        logger.info("Surnameå­—æ®µéªŒè¯ç»“æœæ±‡æ€»")
        logger.info("=" * 80)
        logger.info("| åœºæ™¯ | ç±»å‹ | é•¿åº¦ | ä¿å­˜é¢„æœŸ | ä¿å­˜å®é™… | é”™è¯¯é¢„æœŸ | é”™è¯¯å®é™… | ç»“æœ |")
        logger.info("|------|------|------|----------|----------|----------|----------|------|")
        for r in validation_results:
            scenario_short = r['scenario'][:15]
            type_short = r['type'].split('_')[0][:6]
            save_exp = "âœ“" if r['expected_save'] else "âœ—"
            save_act = "âœ“" if r['actually_saved'] else "âœ—"
            err_exp = "âœ“" if r['expected_error'] else "âœ—"
            err_act = "âœ“" if r['actually_error'] else "âœ—"
            result = "âœ…" if r['match'] else "âŒ"
            logger.info(f"| {scenario_short:15} | {type_short:6} | {r['input_length']:4} | {save_exp:8} | {save_act:8} | {err_exp:8} | {err_act:8} | {result:4} |")
        
        passed = sum(1 for r in validation_results if r['match'])
        total = len(validation_results)
        pass_rate = (passed / total * 100) if total > 0 else 0
        
        logger.info("")
        logger.info(f"æ€»ä½“é€šè¿‡ç‡: {passed}/{total} ({pass_rate:.1f}%)")
        logger.info("=" * 80)
        
        logger.info("TC-VALID-SURNAME-001æ‰§è¡Œå®Œæˆ")
