# 注册功能测试计划

## 1. 测试概述

### 1.1 测试目标
验证Aevatar Station用户注册功能的完整性和安全性，确保新用户能够成功创建账号。

### 1.2 测试范围
- **页面URL**: `https://localhost:44320/Account/Register`
- **测试类型**: 功能测试、验证测试、边界测试、UI测试
- **测试优先级**: P0（核心功能）、P1（重要功能）、P2（次要功能）

### 1.3 页面元素清单
通过Playwright MCP识别的关键页面元素：

| 元素 | 类型 | 选择器/名称 | 必填 |
|------|------|-------------|------|
| 用户名输入框 | textbox | "用户名 *" | 是 |
| 电子邮件输入框 | textbox | "电子邮件地址 *" | 是 |
| 密码输入框 | textbox | "密码 *" | 是 |
| 注册按钮 | button | "注册" | - |
| 已有账号提示 | text | "已经注册？" | - |
| 登录链接 | link | "登录" | - |
| 语言切换器 | button | "简体中文" | - |

---

## 2. 测试用例

### 2.1 功能测试 - P0

#### TC-REG-001: 使用有效数据注册新用户
- **优先级**: P0
- **测试步骤**:
  1. 访问注册页面，截图：初始状态
  2. 输入唯一用户名（如：`testuser_{timestamp}`）
  3. 输入有效邮箱（如：`testuser_{timestamp}@test.com`）
  4. 输入符合强度要求的密码（如：`TestPass123!`）
  5. 截图：所有字段填写完成
  6. 点击"注册"按钮
  7. 截图：注册处理中
  8. 等待页面响应
  9. 截图：注册成功/失败提示
- **预期结果**: 注册成功，跳转到登录页面或自动登录
- **标签**: `@register`, `@P0`, `@functional`

#### TC-REG-002: 注册后自动登录验证
- **优先级**: P1
- **测试步骤**:
  1. 使用有效数据完成注册
  2. 截图：注册成功后的页面
  3. 验证是否自动跳转到Dashboard
  4. 或验证是否显示"注册成功"消息
- **预期结果**: 根据系统配置自动登录或跳转到登录页
- **标签**: `@register`, `@P1`, `@functional`

#### TC-REG-003: 跳转到登录页面链接验证
- **优先级**: P2
- **测试步骤**:
  1. 访问注册页面，截图：初始状态
  2. 点击"登录"链接
  3. 截图：跳转后的登录页面
  4. 验证URL变为`/Account/Login`
- **预期结果**: 成功跳转到登录页面
- **标签**: `@register`, `@P2`, `@navigation`

---

### 2.2 必填字段验证 - P1

#### TC-REG-004: 用户名为空校验
- **优先级**: P1
- **测试步骤**:
  1. 访问注册页面
  2. 用户名保持为空
  3. 填写有效邮箱和密码
  4. 截图：用户名为空
  5. 点击"注册"按钮
  6. 截图：验证错误提示
- **预期结果**: 显示必填字段验证错误
- **标签**: `@register`, `@P1`, `@validation`

#### TC-REG-005: 邮箱为空校验
- **优先级**: P1
- **测试步骤**:
  1. 填写用户名和密码
  2. 邮箱保持为空
  3. 截图：邮箱为空
  4. 点击"注册"按钮
  5. 截图：验证错误提示
- **预期结果**: 显示必填字段验证错误
- **标签**: `@register`, `@P1`, `@validation`

#### TC-REG-006: 密码为空校验
- **优先级**: P1
- **测试步骤**:
  1. 填写用户名和邮箱
  2. 密码保持为空
  3. 截图：密码为空
  4. 点击"注册"按钮
  5. 截图：验证错误提示
- **预期结果**: 显示必填字段验证错误
- **标签**: `@register`, `@P1`, `@validation`

#### TC-REG-007: 所有字段为空校验
- **优先级**: P1
- **测试步骤**:
  1. 访问注册页面，截图：所有字段为空
  2. 直接点击"注册"按钮
  3. 截图：验证错误提示
- **预期结果**: 显示第一个必填字段的验证错误
- **标签**: `@register`, `@P1`, `@validation`

---

### 2.3 格式验证 - P1

#### TC-REG-008: 邮箱格式校验（无效格式）
- **优先级**: P1
- **测试步骤**:
  1. 输入有效用户名
  2. 输入无效邮箱格式（如：`invalid-email`）
  3. 输入有效密码
  4. 截图：无效邮箱格式
  5. 点击"注册"按钮
  6. 截图：格式错误提示
- **预期结果**: 显示邮箱格式错误提示
- **标签**: `@register`, `@P1`, `@validation`

#### TC-REG-009: 邮箱格式校验（缺少@）
- **优先级**: P1
- **测试步骤**:
  1. 输入邮箱：`testuser.com`（缺少@）
  2. 填写其他有效字段
  3. 截图：缺少@的邮箱
  4. 点击"注册"按钮
  5. 截图：格式错误提示
- **预期结果**: 显示邮箱格式错误提示
- **标签**: `@register`, `@P1`, `@validation`

#### TC-REG-010: 邮箱格式校验（缺少域名）
- **优先级**: P1
- **测试步骤**:
  1. 输入邮箱：`testuser@`（缺少域名）
  2. 填写其他有效字段
  3. 截图：缺少域名的邮箱
  4. 点击"注册"按钮
  5. 截图：格式错误提示
- **预期结果**: 显示邮箱格式错误提示
- **标签**: `@register`, `@P1`, `@validation`

#### TC-REG-011: 用户名格式校验（特殊字符）
- **优先级**: P2
- **测试步骤**:
  1. 输入包含特殊字符的用户名（如：`user@#$%`）
  2. 填写其他有效字段
  3. 截图：特殊字符用户名
  4. 点击"注册"按钮
  5. 截图：系统响应
- **预期结果**: 根据系统规则接受或拒绝
- **标签**: `@register`, `@P2`, `@validation`

#### TC-REG-012: 用户名格式校验（空格）
- **优先级**: P2
- **测试步骤**:
  1. 输入包含空格的用户名（如：`test user`）
  2. 填写其他有效字段
  3. 截图：包含空格的用户名
  4. 点击"注册"按钮
  5. 截图：系统响应
- **预期结果**: 显示格式错误或自动移除空格
- **标签**: `@register`, `@P2`, `@validation`

---

### 2.4 密码强度验证 - P1

#### TC-REG-013: 弱密码校验（仅数字）
- **优先级**: P1
- **测试步骤**:
  1. 填写有效用户名和邮箱
  2. 输入仅包含数字的密码（如：`12345678`）
  3. 截图：纯数字密码
  4. 点击"注册"按钮
  5. 截图：密码强度错误提示
- **预期结果**: 显示密码强度不足提示
- **标签**: `@register`, `@P1`, `@validation`

#### TC-REG-014: 弱密码校验（仅字母）
- **优先级**: P1
- **测试步骤**:
  1. 输入仅包含字母的密码（如：`abcdefgh`）
  2. 填写其他有效字段
  3. 截图：纯字母密码
  4. 点击"注册"按钮
  5. 截图：密码强度错误提示
- **预期结果**: 显示密码强度不足提示
- **标签**: `@register`, `@P1`, `@validation`

#### TC-REG-015: 弱密码校验（过短）
- **优先级**: P1
- **测试步骤**:
  1. 输入过短的密码（如：`A1!`，少于最小长度）
  2. 填写其他有效字段
  3. 截图：过短密码
  4. 点击"注册"按钮
  5. 截图：长度错误提示
- **预期结果**: 显示密码长度不足提示
- **标签**: `@register`, `@P1`, `@validation`

#### TC-REG-016: 强密码校验（符合复杂度要求）
- **优先级**: P1
- **测试步骤**:
  1. 输入符合复杂度要求的密码（如：`TestPass123!`）
     - 包含大写字母
     - 包含小写字母
     - 包含数字
     - 包含特殊字符
     - 长度≥8
  2. 填写其他有效字段
  3. 截图：强密码
  4. 点击"注册"按钮
- **预期结果**: 密码验证通过，注册成功
- **标签**: `@register`, `@P1`, `@validation`

---

### 2.5 唯一性验证 - P1

#### TC-REG-017: 重复用户名注册
- **优先级**: P1
- **前置条件**: 系统中已存在用户名`haylee5`
- **测试步骤**:
  1. 输入已存在的用户名（如：`haylee5`）
  2. 输入新的邮箱地址
  3. 输入有效密码
  4. 截图：重复用户名
  5. 点击"注册"按钮
  6. 截图：重复错误提示
- **预期结果**: 显示"用户名已存在"错误提示
- **标签**: `@register`, `@P1`, `@validation`, `@uniqueness`

#### TC-REG-018: 重复邮箱注册
- **优先级**: P1
- **前置条件**: 系统中已存在邮箱
- **测试步骤**:
  1. 输入新的用户名
  2. 输入已存在的邮箱地址
  3. 输入有效密码
  4. 截图：重复邮箱
  5. 点击"注册"按钮
  6. 截图：重复错误提示
- **预期结果**: 显示"邮箱已被注册"错误提示
- **标签**: `@register`, `@P1`, `@validation`, `@uniqueness`

---

### 2.6 边界测试 - P2

#### TC-REG-019: 用户名最大长度
- **优先级**: P2
- **测试步骤**:
  1. 输入最大长度的用户名（如：64个字符）
  2. 填写其他有效字段
  3. 截图：最大长度用户名
  4. 点击"注册"按钮
  5. 截图：系统响应
- **预期结果**: 成功注册或显示长度限制提示
- **标签**: `@register`, `@P2`, `@boundary`

#### TC-REG-020: 邮箱最大长度
- **优先级**: P2
- **测试步骤**:
  1. 输入最大长度的邮箱（如：254个字符）
  2. 填写其他有效字段
  3. 截图：最大长度邮箱
  4. 点击"注册"按钮
- **预期结果**: 成功注册或显示长度限制提示
- **标签**: `@register`, `@P2`, `@boundary`

#### TC-REG-021: 密码最大长度
- **优先级**: P2
- **测试步骤**:
  1. 输入最大长度的密码（如：128个字符）
  2. 填写其他有效字段
  3. 截图：最大长度密码
  4. 点击"注册"按钮
- **预期结果**: 成功注册或显示长度限制提示
- **标签**: `@register`, `@P2`, `@boundary`

---

### 2.7 UI测试 - P1/P2

#### TC-REG-022: 页面加载验证
- **优先级**: P1
- **测试步骤**:
  1. 访问注册页面
  2. 截图：页面完全加载后
  3. 验证页面标题为"注册"
  4. 验证所有表单元素可见
- **预期结果**: 页面正确加载，所有元素可见
- **标签**: `@register`, `@P1`, `@ui`

#### TC-REG-023: 所有表单元素可见性
- **优先级**: P1
- **测试步骤**:
  1. 访问注册页面
  2. 截图：完整表单
  3. 验证以下元素可见：
     - 用户名输入框
     - 邮箱输入框
     - 密码输入框
     - 注册按钮
     - 登录链接
- **预期结果**: 所有元素可见且可交互
- **标签**: `@register`, `@P1`, `@ui`

---

## 3. 测试数据

### 3.1 有效注册数据
```json
{
  "valid_register_data": [
    {
      "username": "testuser_{timestamp}",
      "email": "testuser_{timestamp}@test.com",
      "password": "TestPass123!",
      "expected_result": "注册成功"
    }
  ]
}
```

### 3.2 无效数据
```json
{
  "invalid_data": [
    {
      "username": "",
      "email": "valid@test.com",
      "password": "ValidPass123!",
      "expected_error": "用户名必填"
    },
    {
      "username": "validuser",
      "email": "invalid-email",
      "password": "ValidPass123!",
      "expected_error": "邮箱格式错误"
    },
    {
      "username": "validuser",
      "email": "valid@test.com",
      "password": "weak",
      "expected_error": "密码强度不足"
    }
  ]
}
```

---

## 4. 测试执行策略

### 4.1 测试环境
- **浏览器**: Chromium (Playwright)
- **测试服务器**: `https://localhost:44320`
- **截图策略**: 关键步骤前后自动截图

### 4.2 测试通过标准
- P0功能测试通过率：100%
- P1验证测试通过率：100%
- P2边界测试通过率：≥90%

---

**文档版本**: v1.0  
**创建日期**: 2025-01-06  
**作者**: HyperEcho AI Testing Team

