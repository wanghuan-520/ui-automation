---
description: 
globs: 
alwaysApply: false
---
# FreeMind（.mm）功能测试用例规范指南

本文档旨在提供功能测试用例的FreeMind（.mm）格式编写规范，确保其结构化、内容清晰，并兼容FreeMind等思维导图工具的导入。

## 1. 基本原则
- 每个测试点单独成case，避免多个验证点合并
- 用例编号递增，命名简明
- 用例字段结构化，支持FreeMind(.mm)格式导出
- 所有测试用例必须满足本规范要求
- **新增**：采用分层分类结构，增加功能分类组织层级

## 2. 设计原则
1. **独立性**：每个测试用例应能独立执行，不依赖其他用例结果
2. **可重复性**：测试用例应能多次执行并得到一致结果
3. **可验证性**：预期结果必须具体且可验证
4. **清晰性**：测试步骤和预期结果描述清晰、无歧义
5. **完整性**：测试用例包含执行所需的全部信息
6. **覆盖率优先**：优先保证测试覆盖率，确保功能验证的完整性

## 3. 分层分类结构规范

### 3.1 优化后的分层结构
根据最新的测试用例结构调整，FreeMind格式需要体现分层分类组织方式：

#### 分层结构映射
- **功能模块** (根节点) - 对应Markdown H2级别
- **功能子模块** (一级子节点) - 对应Markdown H3级别  
- **功能分类组** (二级子节点) - 对应Markdown H4级别 (**新增层级**)
- **具体验证点** (三级子节点) - 对应Markdown H5级别
- **测试用例节点** (四级子节点) - 包含完整用例信息

#### 分类组织原则
1. **功能逻辑分组** - 相关功能点聚合在一起
2. **技术实现分组** - 按技术特性和实现方式分类
3. **用户场景分组** - 按用户使用场景分类
4. **异常处理分组** - 按错误类型和异常情况分类

#### FreeMind节点结构示例
```xml
<!-- 功能模块根节点 -->
<node ID="ID_MODULE" TEXT="自动域名生成功能" FOLDED="true">
    <!-- 功能子模块节点 -->
    <node ID="ID_SUBMODULE" TEXT="项目创建时的自动域名生成" FOLDED="true">
        <!-- 功能分类组节点 (新增层级) -->
        <node ID="ID_CATEGORY" TEXT="基本域名生成校验" FOLDED="true">
            <!-- 具体验证点节点 -->
            <node ID="ID_VERIFICATION" TEXT="域名生成时间性能校验" FOLDED="true">
                <!-- 测试用例节点 -->
                <node ID="ID_TESTCASE" TEXT="TC001: 域名生成时间性能测试" FOLDED="false">
                    <node ID="ID_PRIORITY" TEXT="优先级: P0"/>
                    <node ID="ID_TYPE" TEXT="用例类型: 性能测试"/>
                    <node ID="ID_PRECOND" TEXT="前置条件: 用户已登录且系统正常"/>
                    <node ID="ID_SCENARIO" TEXT="测试场景: 用户创建新项目触发域名生成，域名生成在3秒内完成"/>
                </node>
            </node>
        </node>
        
        <!-- 另一个功能分类组 -->
        <node ID="ID_CATEGORY2" TEXT="域名冲突处理校验" FOLDED="true">
            <node ID="ID_VERIFICATION2" TEXT="域名冲突检测校验" FOLDED="true">
                <node ID="ID_TESTCASE2" TEXT="TC002: 域名冲突自动处理测试" FOLDED="false">
                    <!-- 用例详情节点 -->
                </node>
            </node>
        </node>
    </node>
</node>
```

### 3.2 分类命名规范
- **基础功能类**：基本操作校验、基础功能校验
- **性能类**：时间性能校验、响应性能校验
- **兼容性类**：浏览器兼容性校验、设备适配性校验
- **异常处理类**：错误处理校验、异常情况校验
- **环境适配类**：网络环境适配校验、部署环境适配校验

## 4. 测试用例设计方法与技巧

### 4.1 必须应用的6种测试设计方法
- **等价类划分（Equivalence Class Partitioning）**
  - 将输入数据划分为有效的和无效的等价类
  - 从每个等价类中选取一个或少数代表性数据作为测试输入
  - 每个等价类至少设计1个测试用例
- **边界值分析（Boundary Value Analysis）**
  - 重点测试输入和输出的边界条件（最小值、最大值、略高于最小值、略低于最大值、空值、临界长度等）
  - 边界值分析是等价类划分的补充
  - 包括正常边界、异常边界、特殊边界测试
- **判定表驱动法（Decision Table Testing）**
  - 适用于有多个条件组合，并且每个组合对应不同操作的场景
  - 列出所有条件桩和动作桩，形成判定表
  - 确保所有条件组合都被测试覆盖
- **场景法（Use Case/Scenario Testing）**
  - 基于用户实际使用系统的场景来设计测试用例
  - 模拟用户操作流程，验证系统在真实场景下的行为
  - 包括正常场景、异常场景、边界场景
- **错误猜测法（Error Guessing）**
  - 基于经验、直觉和对系统薄弱环节的分析，推测可能存在的缺陷和错误
  - 常用于补充其他结构化测试方法
  - 关注系统容易出错的地方
- **状态迁移法（State Transition Testing）**
  - 适用于被测对象具有明确状态转换的系统或模块
  - 关注系统在不同状态之间的转换路径和事件触发
  - 验证状态转换的正确性和完整性

## 4. 设计方法应用示例
以"昵称设置"功能为例，展示如何应用多种测试设计方法

### 等价类划分应用
- **有效等价类**：1-20字符，中英文数字，允许下划线和间隔号
- **无效等价类**：空值、超长字符、禁止特殊符号、纯符号

### 边界值分析应用
- **最小边界**：1个字符昵称（最小值）
- **最大边界**：20个字符昵称（最大值）
- **异常边界**：0个字符（最小值-1）、21个字符（最大值+1）

### 场景法应用
- **正常场景**：首次设置昵称完整流程
- **修改场景**：修改已有昵称流程
- **冲突场景**：昵称重复处理流程
- **验证场景**：设置后显示验证流程

### 错误推测法应用
- **安全测试**：特殊字符注入、脚本代码输入
- **兼容性测试**：表情符号、多语言字符
- **异常测试**：网络中断、并发操作

### 状态迁移法应用
- **状态定义**：未设置 → 设置中 → 已设置 → 修改中
- **转换测试**：各状态间的正常转换和异常转换
- **状态验证**：每个状态下的界面显示和功能可用性

## 5. 用例字段定义与映射

### 5.1 统一字段定义（优化版）
- 用例编号：唯一标识，递增编号或模块前缀+编号
- 用例名称：动词+对象+"测试"，简明描述单一测试点
- 模块/功能：归属模块或功能点
- **功能分类**：功能分类组名称（**新增字段**）
- 优先级：P0/P1/P2/P3
- 用例类型：功能测试/集成测试/性能测试/安全测试等
- 前置条件：本case执行前需满足的环境、数据、账号等
- **测试场景**：合并了测试步骤和预期结果的完整场景描述（**字段合并优化**）
- ~~测试步骤~~：已合并到测试场景中
- ~~预期结果~~：已合并到测试场景中

### 5.2 FreeMind(.mm)格式映射（优化版）
```xml
<node ID="ID_[数字]" MODIFIED="[timestamp]" TEXT="[用例编号]: [用例名称]" FOLDED="false">
    <node ID="ID_[数字+1]" TEXT="功能分类: [功能分类组名称]"/>
    <node ID="ID_[数字+2]" TEXT="优先级: [P0/P1/P2/P3]"/>
    <node ID="ID_[数字+3]" TEXT="用例类型: [类型]"/>
    <node ID="ID_[数字+4]" TEXT="前置条件: [环境/数据/账号要求]"/>
    <node ID="ID_[数字+5]" TEXT="测试场景: [完整场景描述，包含操作和预期结果]"/>
</node>
```

#### 字段映射变化说明
1. **新增功能分类字段** - 体现H4层级的分类组织
2. **合并测试步骤和预期结果** - 简化为单一的测试场景描述
3. **移除测试数据字段** - 数据信息合并到测试场景中
4. **优化节点结构** - 减少层级嵌套，提高可读性

## 6. 模块编号规范
- 统一前缀：如RENAME-、IAP-、SUB-等
- 每个模块从001开始递增，编号固定3位数字
- 格式：[前缀]-[3位数字]，如RENAME-001

## 7. 拆分原则
- 一个case只验证一个功能点或UI点
- 复杂流程拆分为多个case，每个case一个断言
- 保持信息一致性和完整性

## 8. FreeMind(.mm)格式示例
```xml
<!-- 订阅管理模块 -->
<node ID="ID_SUBSCRIPTION" MODIFIED="1710400000000" POSITION="right" TEXT="订阅管理" FOLDED="true">
    <node ID="ID_68" TEXT="SUB-001: 切换到周订阅测试" FOLDED="false">
        <node ID="ID_69" TEXT="优先级: P0"/>
        <node ID="ID_70" TEXT="用例类型: 集成测试"/>
        <node ID="ID_71" TEXT="前置条件: 用户已登录且环境正常"/>
        <node ID="ID_72" TEXT="测试数据: Weekly Premium $6"/>
        <node ID="ID_73" TEXT="测试步骤">
            <node ID="ID_74" TEXT="1. 进入订阅页面"/>
            <node ID="ID_75" TEXT="2. 选择Weekly Premium"/>
        </node>
        <node ID="ID_76" TEXT="预期结果">
            <node ID="ID_77" TEXT="1. 显示价格$6"/>
            <node ID="ID_78" TEXT="2. 显示just $0.85/day"/>
            <node ID="ID_79" TEXT="3. 显示Start for $6"/>
            <node ID="ID_80" TEXT="4. 显示Perfect for a 7-day glimpse into your future"/>
        </node>
    </node>
</node>
```

## 9. 生成规则
- 遵循字段定义和结构层级，所有信息均以节点形式展现
- 保持节点ID唯一性和递增性
- 正确设置节点的FOLDED属性
- 使用统一的时间戳格式
- 确保特殊字符正确转义
- FreeMind节点的TEXT属性内容中不得包含双引号(")，以避免XML解析错误 

## 11. 最佳实践
1. 先设计测试用例基本信息
2. 使用工具自动生成FreeMind格式
3. 人工审查确保信息一致性
4. 定期同步更新
5. 使用版本控制管理变更

## 12. PRD转测试用例规则
- 功能点识别、测试点提取、优先级划分
- 用例结构化，统一字段填充，步骤细化，预期结果定义
- 结构化信息自动生成FreeMind节点

## 13. 自动化转换规则（伪代码）
```python
# 生成FreeMind节点示例
def generate_mm(test_case):
    """
    <node ID="ID_{unique_id}" TEXT="{module_name}" FOLDED="true">
        <node ID="ID_{case_id}" TEXT="{case_number}: {case_name}">
            <node ID="ID_{priority_id}" TEXT="优先级: {priority}"/>
            <node ID="ID_{type_id}" TEXT="用例类型: {type}"/>
            <node ID="ID_{precond_id}" TEXT="前置条件: {precondition}"/>
            <node ID="ID_{data_id}" TEXT="测试数据: {test_data}"/>
            <node ID="ID_{steps_id}" TEXT="测试步骤">
                {steps_nodes}
            </node>
            <node ID="ID_{results_id}" TEXT="预期结果">
                {result_nodes}
            </node>
        </node>
    </node>
    """
```

## 14. 同步更新机制
- 使用Git管理FreeMind格式文件
- 保持commit信息一致性
- 定期运行一致性检查，自动识别信息不一致的用例
- 生成差异报告并提醒修正

## 15. 检查清单
- [ ] 是否完整识别所有功能点
- [ ] 是否合理拆分测试点
- [ ] 是否正确划分优先级
- [ ] 是否覆盖所有异常场景
- [ ] 是否包含完整测试步骤
- [ ] 是否有明确验证点
- [ ] FreeMind节点是否正确
- [ ] 是否保持ID唯一性
- [ ] 版本号是否同步
- [ ] 差异是否已处理
- [ ] 是否通过一致性检查

## 16. 生成测试用例文件要求
- 生成测试用例文件到 `test-cases/{版本号}/{需求名称}-测试用例.mm`

## 17. 常见错误及避免措施

### 层级结构重复错误
- **错误**: 根节点和第一个子节点使用相同的TEXT内容，造成层级冗余
- **避免**: 确保根节点直接包含功能模块，不要创建重复的标题层级
- **检查**: 生成后验证根节点下的第一个子节点不应与根节点TEXT相同

### 节点嵌套关系错误  
- **错误**: "前置条件"、"测试步骤"、"预期结果"节点的子内容没有正确嵌套
- **避免**: 确保这些特殊节点作为父节点，其具体内容作为子节点正确嵌套
- **检查**: 验证每个测试用例的前置条件、测试步骤、预期结果都有对应的子节点内容

### XML格式错误
- **错误**: 节点ID重复、属性值包含特殊字符未转义、节点结构不完整
- **避免**: 使用唯一递增的ID，对TEXT属性中的特殊字符进行XML转义
- **检查**: 生成后验证XML格式正确性，确保所有节点正确闭合

### 内容解析错误
- **错误**: 从其他格式转换时，内容块识别错误导致信息丢失或错位
- **避免**: 转换前明确源格式的结构规则，使用专门的解析逻辑处理特殊格式（如H6标题下的列表项）
- **检查**: 转换后对比源文件，确保所有测试用例信息完整准确

---

// ... 以上为FreeMind（.mm）格式测试用例设计规范，所有说明均为中文注释 ...

# XX功能测试用例
## 功能模块名称
### 功能测试点1（如：头像设置）
#### 子测试点1.1（如：上传规则校验）
##### 验证点1.1.1（如：文件格式校验）
###### 用例场景1.1.1.1（如：上传jpg格式头像）
####### 预期结果
- 成功上传，头像显示正常
###### 用例场景1.1.1.2（如：上传exe格式头像）
####### 预期结果
- 上传失败，提示"文件格式不支持"
##### 验证点1.1.2（如：文件大小校验）
###### 用例场景1.1.2.1（如：上传超大图片）
####### 预期结果
- 上传失败，提示"文件过大"
#### 子测试点1.2（如：裁剪功能校验）
##### 验证点1.2.1（如：裁剪后保存）
###### 用例场景1.2.1.1
####### 预期结果
- 裁剪后头像显示为新图片
### 功能测试点2（如：昵称规则）
#### 子测试点2.1（如：格式规则校验）
##### 验证点2.1.1
###### 用例场景2.1.1.1
####### 预期结果
- ...

# 用户管理模块测试用例
> 版本号：v1.0.0  
> 需求编号：REQ-001  
> 编写人：张三  
> 编写日期：2024-06-10

## 用户注册
### 邮箱注册
#### 邮箱格式校验
##### 合法邮箱
###### 当用户输入格式正确的邮箱（如user@example.com）时
- 系统允许注册，进入下一步
##### 非法邮箱
###### 当用户输入格式错误的邮箱（如user@@example..com）时
- 系统提示"邮箱格式不正确"，不允许注册

#### 邮箱唯一性校验
##### 已注册邮箱
###### 当用户输入已注册邮箱（如existing@example.com）时
- 系统提示"该邮箱已被注册"，不允许注册

### 密码规则
#### 密码长度
##### 最小长度
###### 当用户输入6位密码时
- 系统允许注册
###### 当用户输入5位密码时
- 系统提示"密码长度不足"，不允许注册